<!doctype html><html lang=ja dir=ltr><head><meta name=generator content="Hugo 0.82.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="WSL2 のインストールや設定の参考情報"><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="002. WSL2 の準備"><meta property="og:description" content="WSL2 のインストールや設定の参考情報"><meta property="og:type" content="article"><meta property="og:url" content="/hadv-book/docs/info/usage/002-wsl2/"><meta property="article:section" content="docs"><meta property="article:published_time" content="2021-04-18T19:38:00+09:00"><meta property="article:modified_time" content="2021-04-18T14:17:47+00:00"><title>002. WSL2 の準備 | hadv-book</title><link rel=manifest href=/hadv-book/manifest.json><link rel=icon href=/hadv-book/favicon.png type=image/x-icon><link rel=stylesheet href=/hadv-book/book.min.286ee045e00b0ff5e023d26eced55641812e81d956629efc6ed3d91cb6feacbf.css integrity="sha256-KG7gReALD/XgI9JuztVWQYEugdlWYp78btPZHLb+rL8="><script type=text/javascript src=/hadv-book/tiny_segmenter-0.2.min.3fa816ded8ca2321b4061d4c169697afaa1d32700c69e90323bf828226585534.js></script><script defer src=/hadv-book/ja.search.min.ab3a31cbc0a42ef53a79ee5e707f7a9f3bcce38f05f15ba201f6b0ff0ef968df.js integrity="sha256-qzoxy8CkLvU6ee5ecH96nzvM448F8VuiAfaw/w75aN8="></script><script defer src=/hadv-book/sw.min.4ebe30fc6123bbe10bab7df118e1970fc31c9a92a0d2741967ee6572cb27223d.js integrity="sha256-Tr4w/GEju+ELq33xGOGXD8McmpKg0nQZZ+5lcssnIj0="></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a href=/hadv-book><span>hadv-book</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=検索 aria-label=検索 maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-52ef6a16cc8de2a2c7fcb56587d93a29 class=toggle checked>
<label for=section-52ef6a16cc8de2a2c7fcb56587d93a29 class="flex justify-between"><a href=/hadv-book/docs/info/>Info</a>
<span>▾</span></label><ul><li><input type=checkbox id=section-a0934764442639837d84ff2ecb37bd40 class=toggle checked>
<label for=section-a0934764442639837d84ff2ecb37bd40 class="flex justify-between"><a href=/hadv-book/docs/info/usage/>Usage</a>
<span>▾</span></label><ul><li><a href=/hadv-book/docs/info/usage/001-win10/>001. Windows10 の準備</a></li><li><a href=/hadv-book/docs/info/usage/002-wsl2/ class=active>002. WSL2 の準備</a></li></ul></li><li><input type=checkbox id=section-aeede9c24c8a491d2ad7cf4d878bc559 class=toggle>
<label for=section-aeede9c24c8a491d2ad7cf4d878bc559 class="flex justify-between"><a href=/hadv-book/docs/info/templates/>Templates</a>
<span>▾</span></label><ul><li><input type=checkbox id=section-b117be173b4b26c26577282bfb48082a class=toggle>
<label for=section-b117be173b4b26c26577282bfb48082a class="flex justify-between"><a href=/hadv-book/docs/info/templates/minutes/>議事録</a>
<span>▾</span></label><ul><li><a href=/hadv-book/docs/info/templates/minutes/tplt001-md/>議事録テンプレート.md</a></li></ul></li></ul></li></ul></li><li><input type=checkbox id=section-090e5e9541fbf7abe3678403e1b40824 class=toggle>
<label for=section-090e5e9541fbf7abe3678403e1b40824 class="flex justify-between"><a href=/hadv-book/docs/example/>Example</a>
<span>▾</span></label><ul><li><a href=/hadv-book/docs/example/asciidoc/>AsciiDoc</a></li><li><input type=checkbox id=section-920f9c2dd946c63cb0f5d07486dfeb76 class=toggle>
<label for=section-920f9c2dd946c63cb0f5d07486dfeb76 class="flex justify-between"><a href=/hadv-book/docs/example/markdown/>Markdown</a>
<span>▾</span></label><ul><li class=book-section-flat><span>Shortcodes</span><ul><li><a href=/hadv-book/docs/example/markdown/shortcodes/buttons/>Buttons</a></li><li><a href=/hadv-book/docs/example/markdown/shortcodes/columns/>Columns</a></li><li><a href=/hadv-book/docs/example/markdown/shortcodes/details/>Details</a></li><li><a href=/hadv-book/docs/example/markdown/shortcodes/hints/>Hints</a></li><li><a href=/hadv-book/docs/example/markdown/shortcodes/katex/>KaTeX</a></li><li><a href=/hadv-book/docs/example/markdown/shortcodes/mermaid/>Mermaid</a></li><li><input type=checkbox id=section-f5b1ac0cefce0032f84e72f3df258ddd class=toggle>
<label for=section-f5b1ac0cefce0032f84e72f3df258ddd class="flex justify-between"><a href=/hadv-book/docs/example/markdown/shortcodes/section/>Section</a>
<span>▾</span></label><ul><li><a href=/hadv-book/docs/example/markdown/shortcodes/section/page1/>Page 1</a></li><li><a href=/hadv-book/docs/example/markdown/shortcodes/section/page2/>Page 2</a></li></ul></li><li><a href=/hadv-book/docs/example/markdown/shortcodes/tabs/>Tabs</a></li></ul></li></ul></li></ul></li></ul><ul><li><a href=/hadv-book/posts/>Blog</a></li></ul><hr style="margin:1.5em 0"><nav class=recent><strong>Recent Posts</strong><ul><li><span>2021-04-18 19:38:00</span><div><i class="fas fa-angle-double-right"></i>
<a class=active style=display:inline href=/hadv-book/docs/info/usage/002-wsl2/>002. WSL2 の準備</a></div></li><li><span>2021-04-18 19:38:00</span><div><i class="fas fa-angle-double-right"></i>
<a class=active style=display:inline href=/hadv-book/docs/info/usage/001-win10/>001. Windows10 の準備</a></div></li><li><span>2021-04-09 00:00:00</span><div><i class="fas fa-angle-double-right"></i>
<a class=active style=display:inline href=/hadv-book/docs/info/templates/minutes/tplt001-md/>議事録テンプレート.md</a></div></li><li><span>2021-04-09 00:00:00</span><div><i class="fas fa-angle-double-right"></i>
<a class=active style=display:inline href=/hadv-book/posts/2021/04/20210409/>サンプル日誌</a></div></li><li><span>2021-04-09 00:00:00</span><div><i class="fas fa-angle-double-right"></i>
<a class=active style=display:inline href=/hadv-book/docs/example/asciidoc/>AsciiDoc</a></div></li></ul></nav><hr style="margin:1.5em 0"><nav class=lastmod><strong>Last Modified</strong><ul><li><span>2021-04-19 01:21:01</span><div><i class="fas fa-angle-double-right"></i>
<a class=active style=display:inline href=/hadv-book/docs/info/usage/001-win10/>001. Windows10 の準備</a></div></li><li><span>2021-04-18 23:17:47</span><div><i class="fas fa-angle-double-right"></i>
<a class=active style=display:inline href=/hadv-book/docs/info/usage/002-wsl2/>002. WSL2 の準備</a></div></li><li><span>2021-04-18 16:47:50</span><div><i class="fas fa-angle-double-right"></i>
<a class=active style=display:inline href=/hadv-book/docs/example/asciidoc/>AsciiDoc</a></div></li><li><span>2021-04-16 21:48:32</span><div><i class="fas fa-angle-double-right"></i>
<a class=active style=display:inline href=/hadv-book/docs/info/templates/minutes/tplt001-md/>議事録テンプレート.md</a></div></li><li><span>2021-04-16 15:19:52</span><div><i class="fas fa-angle-double-right"></i>
<a class=active style=display:inline href=/hadv-book/docs/example/markdown/shortcodes/tabs/>Tabs</a></div></li></ul></nav></nav><script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/hadv-book/svg/menu.svg class=book-icon alt=Menu></label>
<strong>002. WSL2 の準備</strong>
<label for=toc-control><img src=/hadv-book/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><div style="margin:0 0 1em"><strong>Table of Contents</strong></div><nav id=TableOfContents><ul><li><a href=#はじめに>はじめに</a></li><li><a href=#1-wsl2-実行のための要件を確認>#1. WSL2 実行のための要件を確認</a></li><li><a href=#2-wsl-機能の有効化>#2. WSL 機能の有効化</a></li><li><a href=#3-仮想マシンプラットフォーム有効化>#3. 仮想マシンプラットフォーム有効化</a></li><li><a href=#4-再起動>#4. 再起動</a></li><li><a href=#5-linux-カーネル更新>#5. Linux カーネル更新</a></li></ul></nav><hr style="margin:1.5em 0"><nav><strong>Categories</strong><ul><li class=book-section-flat><ul><li class="flex justify-between"><a href=/hadv-book/categories/example/>example</a>
<span>2</span></li><li class="flex justify-between"><a href=/hadv-book/categories/%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88.md/>テンプレート.md</a>
<span>1</span></li><li class="flex justify-between"><a href=/hadv-book/categories/%E6%A5%AD%E5%8B%99%E6%97%A5%E8%AA%8C/>業務日誌</a>
<span>1</span></li><li class="flex justify-between"><a href=/hadv-book/categories/%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89/>環境構築</a>
<span>2</span></li></ul></li></ul></nav><hr style="margin:1.5em 0"><nav><strong>Tags</strong><ul><li class=book-section-flat><ul><li class="flex justify-between"><a href=/hadv-book/tags/Windows10/>Windows10</a>
<span>1</span></li><li class="flex justify-between"><a href=/hadv-book/tags/WSL2/>WSL2</a>
<span>1</span></li></ul></li></ul></nav></aside></header><div class=breadcrumb-shell><ol class=breadcrumb><li><a href=/hadv-book/>HOME</a><li><a href=/hadv-book/docs/info/>Info</a><li><a href=/hadv-book/docs/info/usage/>Usage</a><li>002. WSL2 の準備</ol></div><article class=markdown><h1 id=002-wsl2-の準備>002. WSL2 の準備
<a class=anchor href=#002-wsl2-%e3%81%ae%e6%ba%96%e5%82%99>#</a></h1><p>ここは 002-wsl2（content/docs/info/usage/002-wsl2）です。</p><h2 id=はじめに>はじめに
<a class=anchor href=#%e3%81%af%e3%81%98%e3%82%81%e3%81%ab>#</a></h2><p>公式ドキュメント（<a href=https://docs.microsoft.com/ja-jp/windows/wsl/install-win10>https://docs.microsoft.com/ja-jp/windows/wsl/install-win10</a>）を使って設定することを強く推奨します。<br>しかしながら、公式ドキュメントでは Microsoft Store を開く手順が示されており、制限がかけられた環境（配布された PC で機能が削られている等）では手順通りに設定することができないケースもあります。
そのため、ここでは Microsoft Store を使わない手順を参考まで紹介します。</p><blockquote class="book-hint info">最新の Windows Insider の Windows 10 プレビュー ビルドが使用可能ならば１コマンドで全て完結します。<br>公式ドキュメントを参照してください。</blockquote><h2 id=1-wsl2-実行のための要件を確認>#1. WSL2 実行のための要件を確認
<a class=anchor href=#1-wsl2-%e5%ae%9f%e8%a1%8c%e3%81%ae%e3%81%9f%e3%82%81%e3%81%ae%e8%a6%81%e4%bb%b6%e3%82%92%e7%a2%ba%e8%aa%8d>#</a></h2><p>公式ドキュメントにある要件は、</p><ul><li>x64 システムの場合:バージョン 1903 以降、ビルド 18362 以上。<br>（マイナービルドは 1049 より大きい必要あり）</li><li>ARM64 システムの場合:バージョン 2004 以降、ビルド 19041 以上。</li><li>18362 より前のビルドは WSL 2 をサポートしていません。</li></ul><p>バージョンの確認は、<br>管理者として PowerShell を開き、以下を実行します。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ps1 data-lang=ps1>(Get-ItemProperty -Path <span style=color:#e6db74>&#34;HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion&#34;</span> -Name ReleaseId).ReleaseID
</code></pre></td></tr></table></div></div><p>ビルドの確認は、<br>管理者として開いた PowerShell で、以下を実行します。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ps1 data-lang=ps1>(Get-ItemProperty -Path <span style=color:#e6db74>&#34;HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion&#34;</span> -Name CurrentBuild).CurrentBuild
</code></pre></td></tr></table></div></div><p>マイナービルドの確認は、<br>管理者として開いた PowerShell で、以下を実行します。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ps1 data-lang=ps1>(Get-ItemProperty -Path <span style=color:#e6db74>&#34;HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion&#34;</span> -Name UBR).UBR
</code></pre></td></tr></table></div></div><p>WSL2 実行のための要件に満たなかった場合は、Windows の更新を試みます。</p><h2 id=2-wsl-機能の有効化>#2. WSL 機能の有効化
<a class=anchor href=#2-wsl-%e6%a9%9f%e8%83%bd%e3%81%ae%e6%9c%89%e5%8a%b9%e5%8c%96>#</a></h2><p>管理者として PowerShell を開き、以下を実行します。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ps1 data-lang=ps1>dism.exe /online /enable-feature /featurename<span style=color:#960050;background-color:#1e0010>:</span>Microsoft-Windows-Subsystem-Linux /all /norestart
</code></pre></td></tr></table></div></div><h2 id=3-仮想マシンプラットフォーム有効化>#3. 仮想マシンプラットフォーム有効化
<a class=anchor href=#3-%e4%bb%ae%e6%83%b3%e3%83%9e%e3%82%b7%e3%83%b3%e3%83%97%e3%83%a9%e3%83%83%e3%83%88%e3%83%95%e3%82%a9%e3%83%bc%e3%83%a0%e6%9c%89%e5%8a%b9%e5%8c%96>#</a></h2><p>管理者として PowerShell を開き、以下を実行します。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ps1 data-lang=ps1>dism.exe /online /enable-feature /featurename<span style=color:#960050;background-color:#1e0010>:</span>VirtualMachinePlatform /all /norestart
</code></pre></td></tr></table></div></div><blockquote class="book-hint warning">コンピューターに仮想化機構がない場合など、エラーが発生する場合があります。<br>公式ドキュメント「手順 3:」に対応方法が書かれていますので、従います。</blockquote><h2 id=4-再起動>#4. 再起動
<a class=anchor href=#4-%e5%86%8d%e8%b5%b7%e5%8b%95>#</a></h2><p>PC を再起動します。</p><h2 id=5-linux-カーネル更新>#5. Linux カーネル更新
<a class=anchor href=#5-linux-%e3%82%ab%e3%83%bc%e3%83%8d%e3%83%ab%e6%9b%b4%e6%96%b0>#</a></h2></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/H16K148/hadv-book/commit/efe01a44bd7cfe175ef4dd5b4d233f245c6bd71c title="最終更新者 H16K148 | 2021-04-18" target=_blank rel=noopener><img src=/hadv-book/svg/calendar.svg class=book-icon alt=Calendar>
<span>2021-04-18</span></a></div></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><div style="margin:0 0 1em"><strong>Table of Contents</strong></div><nav id=TableOfContents><ul><li><a href=#はじめに>はじめに</a></li><li><a href=#1-wsl2-実行のための要件を確認>#1. WSL2 実行のための要件を確認</a></li><li><a href=#2-wsl-機能の有効化>#2. WSL 機能の有効化</a></li><li><a href=#3-仮想マシンプラットフォーム有効化>#3. 仮想マシンプラットフォーム有効化</a></li><li><a href=#4-再起動>#4. 再起動</a></li><li><a href=#5-linux-カーネル更新>#5. Linux カーネル更新</a></li></ul></nav><hr style="margin:1.5em 0"><nav><strong>Categories</strong><ul><li class=book-section-flat><ul><li class="flex justify-between"><a href=/hadv-book/categories/example/>example</a>
<span>2</span></li><li class="flex justify-between"><a href=/hadv-book/categories/%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88.md/>テンプレート.md</a>
<span>1</span></li><li class="flex justify-between"><a href=/hadv-book/categories/%E6%A5%AD%E5%8B%99%E6%97%A5%E8%AA%8C/>業務日誌</a>
<span>1</span></li><li class="flex justify-between"><a href=/hadv-book/categories/%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89/>環境構築</a>
<span>2</span></li></ul></li></ul></nav><hr style="margin:1.5em 0"><nav><strong>Tags</strong><ul><li class=book-section-flat><ul><li class="flex justify-between"><a href=/hadv-book/tags/Windows10/>Windows10</a>
<span>1</span></li><li class="flex justify-between"><a href=/hadv-book/tags/WSL2/>WSL2</a>
<span>1</span></li></ul></li></ul></nav></div></aside></main><footer><div class=copyright>Copyright &#169; 2021 <a href=https://h16k148.github.io>H16K148</a>. All Rights Reserved.</div></footer></body></html>